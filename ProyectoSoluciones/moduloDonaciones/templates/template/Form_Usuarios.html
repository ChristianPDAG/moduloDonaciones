<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" crossorigin="anonymous"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" >
	<script crossorigin="anonymous"
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" >
	</script>
    <title>Document</title>
</head>
<body>
    <table class="table"> <!-- tabla datos de usuario -->
        <thead>
            <tr>
                <th >Id</th>
                <th  >Nombre</th>
                <th >Correo</th>
                <th >Tipo de prenda</th>
                <th >Talla</th>
                <th >Estado</th>
                <th >Detalle</th>
                <th>Imagen</th>
                <th>Aceptar/Rechazar</th>

            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                {% for donacion_key, donacion_value in user.donaciones.items %}
                    <tr>
                        {% if forloop.first %}
                            <!-- Mostrar información del usuario solo en la primera fila de donaciones -->
                            <td rowspan="{{ user.donaciones|length }}">{{ user.ID }}</td>
                            <td rowspan="{{ user.donaciones|length }}">{{ user.nombre }}</td>
                            <td rowspan="{{ user.donaciones|length }}">{{ user.correo }}</td>

                        {% endif %}
                        <td>{{ donacion_value.tipo_prenda|default:"Sin información" }}</td>
                        <td>{{ donacion_value.talla|default:"Sin información" }}</td>
                        <td>{{ donacion_value.estado|default:"Sin información" }}</td>
                        <td>{{ donacion_value.detalle|default:"Sin información" }}</td>
                        <td>
                            <img src="{{ donacion_value.img }}" alt="Imagen" class="img-fluid" width="100">
                        </td>
                    </tr>
                {% endfor %}
                {% if user.donaciones|length == 0 %}
                    <!-- Si no hay donaciones, mostrar una fila con información del usuario -->
                    <tr>
                        <td>{{ user.ID }}</td>
                        <td>{{ user.correo }}</td>
                        <td colspan="4">Sin donaciones</td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
  
    
    
    
<!--    
        <tbody>
            {% for user in users %}
                <tr>
                        <td rowspan="4" scope="rowgroup">{{ user.ID }}
                        <td rowspan="4" scope="rowgroup">{{ user.nombre }}</td>
                        <td rowspan="4" scope="rowgroup">{{ user.correo }}</td>
                </tr>
                <tr>
                    
                            <tr>
                                <td >{% if donacion_value.tipo_prenda %}{{ donacion_value.tipo_prenda }}{% else %}Sin información{% endif %}</td>
                            
                                <td >{% if donacion_value.talla %}{{ donacion_value.talla }}{% else %}Sin información{% endif %}</td>
                            
                                <td >{% if donacion_value.estado %}{{ donacion_value.estado }}{% else %}Sin información{% endif %}</td>
                            
                                <td>{% if donacion_value.detalle %}{{ donacion_value.detalle }}{% else %}Sin información{% endif %}</td>
                            </tr>
                                
                            {% endfor %}
                    
                  
                </tr>
     
        </tbody>
    </table> tabla donaciones

    <table class="table"> 
        <thead>
            <tr>
                
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            
            {% endfor %}

</body>
</html>
    

    <form method="post" >
        {% csrf_token %}
        {{ form.as_p }}
        
        <input type="submit" class="btn btn-info" value="ENVIAR">
    </form>
    <form action="" method = "POST">{% csrf_token %}
        <div class="form-group row">
          <label for="ID">ID</label>
          <input type="text" class="form-control" name="id" id="id">
        </div>
        <div class="form-group row">
            <label for="nombre">Nombre</label>
            <input type="text" class="form-control" name="name" id="name">
        </div>
        <div class="form-group row">
            <label for="correo">Correo</label>
            <input type="text" class="form-control" name="year" id="year">
        </div>
        
        <button type="btnAdd" class="btn btn-primary" href="addUs">Guardar</button>
        <a href="/" class="btn btn-primary">Cancel</a>
      </form> --!>
<!--    <form action="" method="POST">
        <ul>
            <li>
                <label for="name">Nombre: </label>
                <input type="text" id="name" name="user_name">
            </li>
            <li>
                <label for="email">Email: </label>
                <input type="text" name="email" id="email">
            </li>
            <li>
                <label for="fono">Fono: </label>
                <input type="text" name="fono" id="fono">
            </li>
            <li>
                <label for="msg">Mensaje:</label>
                <textarea name="user_msg" id="msg"></textarea>
            </li>
        </ul>
    </form>   -->
    
    